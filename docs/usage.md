# 使用

你已经成功安装了 CloudBase CMS，接下来可以尝试了解、实践下面的一些内容了。

## 术语

CloudBase CMS 可以帮助你处理复杂的场景，在这种情况下，我们引入了一些抽象的、通用的概念来表述系统的能力。为了更好地理解、使用 CloudBase CMS，我们建议你在使用前了解下面这些常用的术语：

| 术语     | 定义                                                                         |
| -------- | ---------------------------------------------------------------------------- |
| Id       | 通常表示一件事物的唯一标志，如公民的身份证号                                 |
| 项目     | CloudBase CMS 以<项目>为维度管理内容文档，不同项目间的内容文档是彼此隔离的   |
| 内容模型 | 对内容文档的结构定义                                                         |
| 内容集合 | 由一类内容文档组成的数据集，表现为表格的形式，表格中的每一列代表一个内容文档 |
| Webhook  | Webhook 是用户定义的 HTTP 回调，Webhook 通常被某些事件激活，如内容修改       |

## 访问 CloudBase CMS

CloudBase CMS 已经部署在当前环境下的静态网站托管中，访问地址的格式如下：`云开发静态托管默认域名/部署路径`，例如 `https://xxxx.tcloudbaseapp.com/tcb-cms/`。默认域名可以访问[控制台](https://console.cloud.tencent.com/tcb/hosting/index)查看。

### 账号登录

打开 CloudBase CMS 后需要先登录，你可以使用安装扩展时设置的管理员账号和密码进行登录。

## 新建项目

项目是为了在 CloudBase CMS 同时管理多个不同的内容数据源，便于区分内容数据用途，权限管理等。

在开始管理内容数据前，我们需要先创建一个项目，如这里以博客应用为例，我们可以创建一个项目，名为博客，项目 Id 为 blog。

![](https://main.qcloudimg.com/raw/e856249f0defacbcb9d54b1af5b4050d.png)

## 内容建模

登录成功后，首先需要进行内容的建模设置，例如我们想为自己的博客应用（小程序/网站）来生成管理界面。

假设当前已有一个管理文章的数据库集合 `articles`，我们可以在 CloudBase CMS 中新建一个 “文章” 内容模型（如果新建内容的时候指定的集合名不存在，CloudBase CMS 扩展会自动新建集合）来生成“文章”类型的内容管理界面。

假设数据库集合 `articles` 的结构如下：

| 字段名     | 类型     | 描述                                         |
| ---------- | -------- | -------------------------------------------- |
| \_id       | ID       | 文章唯一 id                                  |
| name       | String   | 文章标题                                     |
| cover      | String   | 封面图，这里存放云开发的存储的文件的 cloudID |
| content    | String   | 文章内容，采用 markdown 格式                 |
| author     | ID       | 作者的用户 id                                |
| createTime | DateTime | 创建时间                                     |
| updateTime | DateTime | 更新时间                                     |
| tag        | String[] | 标签，例如 `["serverless","cms"]`            |
| category   | String[] | 分类，例如 `["前端","开发"]`                 |

### 创建内容模型

首先在“内容模型”中点击“新建模型”来创建“文章”类型，我们可以把展示名称设置为“文章”，数据库名设置为 `articles`。

### 编辑内容模型

在创建完内容模型后，我们会得到一个空的内容模型。然后，我们需要为内容模型添加字段类型。

![](https://main.qcloudimg.com/raw/2ea452492b7c147d0cea50beba9e0977.png)

可以对照上面的集合数据把字段类型和字段的限制进行配置，例如封面图可以直接选择 “图片”字段类型，文章内容可以直接选择 “Markdown” 类型，这样在生成的管理界面里可以直接上传图片和通过编辑器编写文章，保存在数据库集合的时候，依然会保存为数据库支持的类型，图片会存储为云存储的 CloudID, 内容会存储为字符串等。

### 管理内容

在创建完内容模型后，我们可以点击“内容集合”下的菜单，管理我们刚创建的“文章”数据。我们可以点击新建按钮，新建一篇博客文章。填写完内容后，点击创建即可。

![](https://main.qcloudimg.com/raw/46ad36fe17df35fd6a0173ed77455522.png)

文章创建成功后，即可在文章列表中看到这篇文章。

![](https://main.qcloudimg.com/raw/bcf6241f00811130754ba06dedba832a.png)

## 使用内容数据

采用 CMS 管理的内容，依然可以通过云开发各端 SDK 进行访问（需要注意的是在前端访问时，需要正确设置数据库的安全规则设置，例如设置为所有用户可读，仅创建者可写）。
例如，在上面的例子里，我们需要在云函数中获取文章的标签是 `CloudBase` 的最新 10 条文章，可以采用以下代码来获取数据：

```javascript
db.collection('articles').where({ tag: 'CloudBase' }).orderBy('createTime', 'desc').limit(10).get()
```

获取到内容数据就可以在各种场景使用了，比如在小程序/ Web 中构建应用和网站。
![](https://main.qcloudimg.com/raw/1b8fc44b2ec3d6a3cf151d7abe2b6e0e/api-result.png)
