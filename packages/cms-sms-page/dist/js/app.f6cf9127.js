(function(e){function t(t){for(var a,r,s=t[0],c=t[1],l=t[2],u=0,d=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);p&&p(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,s=1;s<i.length;s++){var c=i[s];0!==o[c]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},o={app:0},n=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/cms-activities/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=c;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"1c76":function(e,t,i){var a=i("53d5");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("499e").default;o("91e53904",a,!0,{sourceMap:!1,shadowMode:!1})},"32f1":function(e,t,i){var a=i("a2d6");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("499e").default;o("59dd0e84",a,!0,{sourceMap:!1,shadowMode:!1})},3710:function(e,t,i){var a=i("643d");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("499e").default;o("fb54c930",a,!0,{sourceMap:!1,shadowMode:!1})},4604:function(e,t,i){"use strict";i("1c76")},"53d5":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"#public-web-container[data-v-9a94ae86]{height:100%}.weui-btn[data-v-9a94ae86]{margin-top:2rem}.bottom[data-v-9a94ae86]{position:absolute;bottom:0;left:0;right:0}.bottom .weui-btn[data-v-9a94ae86]{width:100%;height:3rem;border-radius:0;font-size:18px;display:flex;align-items:center;justify-content:center}",""]),e.exports=t},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[e.pageLoading?i("loading"):e._e(),e.bgImg?i("img",{attrs:{id:"bgImg",src:e.bgImg}}):e._e(),e.isWeixin?i("wechat-web",{attrs:{appPath:e.appPath,bgImg:e.bgImg}}):e.isDesktop?i("desktop-web"):i("public-web",{attrs:{bgImg:e.bgImg,openWeapp:e.openWeapp,btnLoading:e.btnLoading}}),i("we-dialog",{attrs:{onOk:e.openWeapp,visible:e.dialogVisible,message:e.dialogMsg}})],1)},n=[],r=(i("99af"),i("c975"),i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("5319"),i("96cf"),i("1da1")),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"center",attrs:{id:"wechat-web-container"}},[i("div",{class:{bottom:e.bgImg}},[i("p",[e._v("点击以下按钮打开"+e._s(e.appName))]),e.bgImg?i("wx-open-launch-weapp",{attrs:{username:e.originalID,path:e.appPath}},[i("script",{attrs:{type:"text/wxtag-template"}},[e._v(' <button style="width: 100%; height: 3rem; font-size: 18px; display: flex; align-items: center; justify-content: center; border: none; border-radius: 0; background-color: #07c160; color:#fff;" > 打开小程序 </button> ')])]):i("wx-open-launch-weapp",{attrs:{username:e.originalID,path:e.appPath}},[i("script",{attrs:{type:"text/wxtag-template"}},[e._v(' <button v-else style="width: 200px; height: 45px; text-align: center; font-size: 17px; display: block; margin: 0 auto; padding: 8px 24px; border: none; border-radius: 4px; background-color: #07c160; color:#fff;"> 打开小程序 </button> ')])])],1)])},c=[],l={props:{bgImg:String,appPath:String},data:function(){var e=window,t=e.cloudResource,i=void 0===t?{}:t;return{appName:i.appName||"",originalID:i.appOriginalID||""}},computed:{},mounted:function(){}},p=l,u=(i("8c54"),i("2877")),d=Object(u["a"])(p,s,c,!1,null,"dc458eee",null),g=d.exports,f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"center",attrs:{id:"public-web-container"}},[i("div",{class:{bottom:e.bgImg}},[i("p",[e._v("正在打开"+e._s(e.appName)+"...")]),i("a",{staticClass:"weui-btn weui-btn_primary weui-btn_loading",attrs:{href:"javascript:"},on:{click:this.onOpenWeapp}},[e.loading?i("span",{staticClass:"weui-primary-loading weui-primary-loading_transparent"},[i("i",{staticClass:"weui-primary-loading__dot"})]):e._e(),e._v(" 打开小程序 ")])])])},m=[],h={props:{bgImg:String,loading:Boolean,openWeapp:Function},data:function(){var e=window,t=e.cloudResource,i=void 0===t?{}:t;return{appName:i.appName||"",originalID:i.appOriginalID||""}},methods:{onOpenWeapp:function(){this.openWeapp()}}},b=h,v=(i("4604"),Object(u["a"])(b,f,m,!1,null,"9a94ae86",null)),w=v.exports,x=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},y=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"center",attrs:{id:"desktop"}},[i("p",[e._v("请在手机打开网页链接")])])}],_={},I=_,k=Object(u["a"])(I,x,y,!1,null,"36b91ec9",null),j=k.exports,O=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},W=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"center",attrs:{id:"loading"}},[i("div",[i("span",{staticClass:"weui-primary-loading weui-primary-loading_brand"},[i("span",{staticClass:"weui-primary-loading__dot"})]),i("p",[e._v(" 加载中... ")])])])}],D={},C=D,P=(i("9206"),Object(u["a"])(C,O,W,!1,null,null,null)),M=P.exports,A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"js_dialog",attrs:{id:""}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[e._v(" "+e._s(e.message)+" ")]),i("div",{staticClass:"weui-dialog__ft",on:{click:this.onOk}},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:"}},[e._v(" 我知道了 ")])])])])},S=[],E={props:{visible:Boolean,message:String,onOk:Function},name:"WeDialog"},L=E,N=(i("6a06"),Object(u["a"])(L,A,S,!1,null,"169a55ac",null)),$=N.exports,R={name:"App",components:{WechatWeb:g,PublicWeb:w,DesktopWeb:j,Loading:M,WeDialog:$},data:function(){return{isWXWork:!1,isWeixin:!1,isMobile:!1,isDesktop:!1,cloudApp:null,appPath:"",bgImg:"",pageLoading:!0,btnLoading:!1,openlink:"",dialogVisible:!1,dialogMsg:"",generateSchemaError:!1}},created:function(){var e=navigator.userAgent.toLowerCase();this.isWXWork="wxwork"==e.match(/wxwork/i),this.isWeixin=!this.isWXWork&&"micromessenger"==e.match(/micromessenger/i),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|IEMobile)/i)?this.isMobile=!0:this.isDesktop=!0,this.isDesktop?this.pageLoading=!1:this.initCloudAndGetActivityInfo()},mounted:function(){this.isWeixin&&this.initWxConfig()},methods:{initWxConfig:function(){var e=window,t=e.cloudResource,i=void 0===t?{}:t;wx.config({appId:i.appID,timestamp:0,nonceStr:"nonceStr",signature:"signature",jsApiList:["chooseImage"],openTagList:["wx-open-launch-weapp"]})},initCloudAndGetActivityInfo:function(){var e=window,t=e.cloudResource;if(t&&"{{APPID}}"!==t.appID){var i=new window.cloud.Cloud({identityless:!0,resourceAppid:t.appID,resourceEnv:t.envID});i.init(),this.cloudApp=i,this.getActivityInfo()}else this.showDialog("页面初始化信息缺失")},getQueryByName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=i.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},showDialog:function(e){this.dialogMsg=e,this.dialogVisible=!0},getActivityInfo:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i,a,o,n,r,s,c,l,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.btnLoading=!0,i=window,a=i.cloudResource,o=void 0===a?{}:a,t.prev=2,n=e.getQueryByName("activityId"),t.next=6,e.cloudApp.callFunction({name:"wx-ext-cms-sms",data:{activityId:n,action:"getUrlScheme"}});case 6:if(r=t.sent,console.log(r),s=r.result,!s.error){t.next=13;break}return e.generateSchemaError=!0,e.showDialog(s.error.message),t.abrupt("return");case 13:e.openlink=r.result.openlink,c=r.result.activity||{},c.jumpImg&&(e.bgImg=c.jumpImg),l="",c&&c._id?"boolean"!==typeof c.isActivityOpen||c.isActivityOpen?c.startTime>Date.now()?l="尚未开始":c.endTime<Date.now()&&(l="已结束"):l="未开放":l="不存在",c.appPath&&(p=c.appPath+".html?"),c.appPathQuery&&(p+=c.appPathQuery),p&&(e.appPath=p),l?e.showDialog("当前活动".concat(l,"，更多精彩活动来").concat(o.appName,"看看吧")):e.isWeixin||e.isDesktop||(location.href=e.openlink),t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](2),console.log(t.t0),t.t0.message&&t.t0.message.indexOf("40165")>-1?e.showDialog("页面路径填写错误"):alert(t.t0);case 28:return t.prev=28,e.pageLoading=!1,e.btnLoading=!1,t.finish(28);case 32:case"end":return t.stop()}}),t,null,[[2,24,28,32]])})))()},openWeapp:function(){this.dialogVisible=!1,this.isWeixin||this.generateSchemaError||(this.openlink?location.href=this.openlink:this.getActivityInfo())}}},T=R,B=(i("7c55"),Object(u["a"])(T,o,n,!1,null,null,null)),U=B.exports;a["a"].config.productionTip=!1,a["a"].config.ignoredElements=[/^wx/],console.log("production"),new a["a"]({render:function(e){return e(U)}}).$mount("#app")},"643d":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"#loading .weui-primary-loading{height:48px;width:48px}#loading .weui-primary-loading:after,#loading .weui-primary-loading:before{border:3px solid}#loading .weui-primary-loading:before{border-right-width:0;width:24px;height:48px;border-top-left-radius:48px;border-bottom-left-radius:48px}#loading .weui-primary-loading:after{width:24px;height:48px;border-left-width:0;border-top-right-radius:48px;border-bottom-right-radius:48px}#loading p{margin-top:1rem}",""]),e.exports=t},"6a06":function(e,t,i){"use strict";i("32f1")},"7b3a":function(e,t,i){var a=i("b4e7");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("499e").default;o("489c63e6",a,!0,{sourceMap:!1,shadowMode:!1})},"7c55":function(e,t,i){"use strict";i("bc9f")},"7d79":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"#app{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;text-align:center;color:#2c3e50}body,html{height:100%;margin:0}#app{height:calc(100% - constant(safe-area-inset-bottom));height:calc(100% - env(safe-area-inset-bottom));position:relative}body{padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}img{position:absolute;height:calc(100% - constant(safe-area-inset-bottom));height:calc(100% - env(safe-area-inset-bottom));width:100%;top:0;left:0;right:0;z-index:-1;bottom:constant(safe-area-inset-bottom);bottom:env(safe-area-inset-bottom)}.center{height:100%;display:flex;align-items:center;justify-content:center}",""]),e.exports=t},"8c54":function(e,t,i){"use strict";i("7b3a")},9206:function(e,t,i){"use strict";i("3710")},a2d6:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".js_dialog[data-v-169a55ac]{transition:opacity .2s linear 0s}",""]),e.exports=t},b4e7:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"p[data-v-dc458eee]{margin-bottom:2rem}.bottom[data-v-dc458eee]{position:absolute;bottom:0;left:0;right:0}.bottom p[data-v-dc458eee]{margin-bottom:4.5rem}.bottom wx-open-launch-weapp[data-v-dc458eee]{position:absolute;bottom:0;left:0;right:0;display:flex;align-items:center;justify-content:center}",""]),e.exports=t},bc9f:function(e,t,i){var a=i("7d79");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("499e").default;o("97192934",a,!0,{sourceMap:!1,shadowMode:!1})}});